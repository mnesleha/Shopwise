openapi: 3.0.3
info:
  title: Shopwise API
  version: 1.0.0
  description: |

    ## What is Shopwise

    Shopwise is a quality-driven showcase project.

    ## Why it exists

    This API demonstrates:
    - QA as equal development partner
    - documentation as a quality tool
    - testing as part of design

    ## Quality Strategy

    - Test Driven Development
    - Documentation Driven Development
    - OpenAPI as single source of truth

    ## Intended Audience

    - Recruiters
    - Test Managers
    - Project Managers
paths:
  /api/v1/auth/login/:
    post:
      operationId: v1_auth_login_create
      description: >-
        Login endpoint intended for automated testing and QA workflows. Creates
        a session and sets authentication cookies.
      summary: Login user (test endpoint)
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  minLength: 1
                password:
                  type: string
                  minLength: 1
              required:
                - password
                - username
            example:
              password: '{{password}}'
              username: '{{username}}'
        required: true
      responses:
        '200':
          description: No response body
      parameters:
        - name: X-CSRFToken
          in: header
          schema:
            type: string
          example: '{{csrftoken}}'
  /api/v1/cart/:
    get:
      operationId: v1_cart_retrieve
      description: |

        Returns the user's active cart.

        Behavior:
        - If an ACTIVE cart exists, it is returned.
        - If no ACTIVE cart exists, a new cart is created automatically.

        Important notes:
        - This endpoint has a side-effect (cart creation).
        - The operation is not strictly read-only.
        - This behavior is intentional to simplify frontend integration.

        HTTP semantics:
        - 200 OK: an existing active cart is returned
        - 201 Created: a new active cart was created (target behavior)

        Note:
        - Current implementation always returns 200 OK.
        - Returning 201 Created when a cart is created is a planned improvement.
      summary: Retrieve active cart
      tags:
        - Cart
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - ACTIVE
                      - CONVERTED
                    description: |-
                      * `ACTIVE` - Active
                      * `CONVERTED` - Converted
                required:
                  - id
                  - items
              examples:
                ExistingActiveCart:
                  value:
                    id: 10
                    status: ACTIVE
                    items:
                      - id: 5
                        product: 42
                        quantity: 2
                        price_at_add_time: '19.99'
                  summary: Existing active cart
        '201':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - ACTIVE
                      - CONVERTED
                    description: |-
                      * `ACTIVE` - Active
                      * `CONVERTED` - Converted
                required:
                  - id
                  - items
              examples:
                NewlyCreatedEmptyCart:
                  value:
                    id: 11
                    status: ACTIVE
                    items: []
                  summary: Newly created empty cart
        '401':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
  /api/v1/cart/checkout/:
    post:
      operationId: v1_cart_checkout_create
      description: >

        Converts the user's active cart into an order.


        Workflow:

        1. Validates that an ACTIVE cart exists

        2. Validates that the cart is not empty

        3. Creates an Order and associated OrderItems

        4. Marks the cart as CONVERTED


        Business rules:

        - A cart can be checked out only once

        - Orders are immutable

        - After checkout, a new ACTIVE cart will be created on next cart
        retrieval


        Error handling strategy:

        - 400 Bad Request: cart exists but is empty

        - 404 Not Found: no ACTIVE cart exists

        - 409 Conflict: cart cannot be checked out due to state conflict
          (e.g. already converted, concurrent checkout)

        Notes:

        - Error handling reflects the target API contract.

        - Some conflict scenarios may not be fully implemented yet.
      summary: Checkout active cart
      tags:
        - Cart Checkout
      security:
        - ApiKeyAuth: []
      responses:
        '201':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - CREATED
                      - PAID
                      - PAYMENT_FAILED
                      - SHIPPED
                      - DELIVERED
                      - CANCELED
                    description: |-
                      * `CREATED` - Created
                      * `PAID` - Paid
                      * `PAYMENT_FAILED` - Payment Failed
                      * `SHIPPED` - Shipped
                      * `DELIVERED` - Delivered
                      * `CANCELED` - Canceled
                required:
                  - id
                  - items
                  - total_price
              examples:
                CheckoutSuccessful:
                  value:
                    id: 123
                    status: CREATED
                    items:
                      - product: 42
                        quantity: 2
                        price_at_order_time: '19.99'
                    total_price: '39.98'
                  summary: Checkout successful
        '400':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                CartIsEmpty:
                  value:
                    detail: Cart is empty.
                  summary: Cart is empty
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                NoActiveCart:
                  value:
                    detail: No active cart to checkout.
                  summary: No active cart
        '409':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                CartAlreadyCheckedOut:
                  value:
                    detail: Cart has already been checked out.
                  summary: Cart already checked out
      parameters:
        - name: X-CSRFToken
          in: header
          schema:
            type: string
          example: '{{csrftoken}}'
  /api/v1/cart/items/:
    post:
      operationId: v1_cart_items_create
      description: >

        Adds a product to the user's active cart.


        Business rules:

        - If no active cart exists, a new one is created automatically.

        - Quantity must be greater than zero.

        - Product price is snapshotted at add time.


        Error handling strategy:

        - 400 Bad Request: request is malformed or fails validation (e.g.
        invalid quantity)

        - 404 Not Found: referenced product does not exist

        - 409 Conflict: product exists but cannot be added to the cart
          (e.g. out of stock, inactive, business rule violation)

        Notes:

        - Error handling behavior reflects the target API contract.

        - Not all scenarios may be fully implemented yet.
      summary: Add item to active cart
      tags:
        - Cart Items
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CartItemCreateRequestRequest'
            examples:
              Add2ItemsOfProduct42:
                value:
                  product_id: '{{product_id}}'
                  quantity: 2
                summary: Add 2 items of product 42
        required: true
      security:
        - ApiKeyAuth: []
      responses:
        '201':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  product:
                    type: integer
                  quantity:
                    type: integer
                    minimum: 0
                    maximum: 4294967295
                    format: int64
                  price_at_add_time:
                    type: string
                    pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
                required:
                  - id
                  - price_at_add_time
                  - product
                  - quantity
              examples:
                ItemSuccessfullyAdded:
                  value:
                    id: 15
                    product: 42
                    quantity: 2
                    price_at_add_time: '19.99'
                  summary: Item successfully added
        '400':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                InvalidQuantity:
                  value:
                    detail: Quantity must be greater than zero.
                  summary: Invalid quantity
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                ProductNotFound:
                  value:
                    detail: Referenced product does not exist.
                  summary: Product not found
        '409':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                ProductUnavailable:
                  value:
                    detail: Product is currently unavailable.
                  summary: Product unavailable
      parameters:
        - name: X-CSRFToken
          in: header
          schema:
            type: string
          example: '{{csrftoken}}'
  /api/v1/categories/:
    get:
      operationId: v1_categories_list
      description: |

        Returns the category tree used for product classification.

        Behavior:
        - Only parent (root) categories are returned.
        - Child categories are nested under their parent.
        - Category hierarchy is limited to two levels (parent â†’ children).

        Notes:
        - Categories are read-only.
        - Leaf categories are not exposed as top-level resources.
      summary: List product categories
      tags:
        - Categories
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      maxLength: 255
                    is_parent:
                      type: boolean
                  required:
                    - children
                    - id
                    - name
              examples:
                CategoryTree:
                  value:
                    - - id: 1
                        name: Electronics
                        is_parent: true
                        children:
                          - id: 2
                            name: Accessories
                            is_parent: false
                            children: []
                  summary: Category tree
  /api/v1/categories/{id}/:
    get:
      operationId: v1_categories_retrieve
      description: |

        Returns details of a single category.

        Notes:
        - Categories are read-only.
        - Both parent and leaf categories can be retrieved by ID.
      summary: Retrieve category detail
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this category.
          required: true
      tags:
        - Categories
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    maxLength: 255
                  is_parent:
                    type: boolean
                required:
                  - children
                  - id
                  - name
              examples:
                CategoryDetail:
                  value:
                    id: 1
                    name: Electronics
                    is_parent: true
                    children:
                      - id: 2
                        name: Accessories
                        is_parent: false
                        children: []
                  summary: Category detail
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
    parameters:
      - name: id
        in: path
        required: true
        description: A unique integer value identifying this category.
        schema:
          type: integer
        example: '1904'
  /api/v1/discounts/:
    get:
      operationId: v1_discounts_list
      description: |

        Returns currently active discounts.

        Only discounts that:
        - are active
        - are within their validity period
        - target a product or a leaf category

        are returned.

        Notes:
        - Discounts are read-only.
        - Discounts do not calculate final prices.
        - Category discounts apply only to leaf categories.
      summary: List active discounts
      tags:
        - Discounts
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    discount_type:
                      type: string
                      enum:
                        - PERCENT
                        - FIXED
                      description: |-
                        * `PERCENT` - Percent
                        * `FIXED` - Fixed
                    value:
                      type: string
                      pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
                    product:
                      allOf:
                        - type: object
                          properties:
                            id:
                              type: integer
                            name:
                              type: string
                              maxLength: 255
                          required:
                            - id
                            - name
                  required:
                    - discount_type
                    - id
                    - product
                    - value
              examples:
                ActiveProductDiscount:
                  value:
                    - - id: 1
                        discount_type: PERCENT
                        value: '10.00'
                        product:
                          id: 42
                          name: Wireless Mouse
                  summary: Active product discount
  /api/v1/discounts/{id}/:
    get:
      operationId: v1_discounts_retrieve
      description: |

        Returns details of a single discount.

        Notes:
        - Only active discounts within their validity period are accessible.
        - Discounts are read-only.
      summary: Retrieve discount detail
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this discount.
          required: true
      tags:
        - Discounts
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  discount_type:
                    type: string
                    enum:
                      - PERCENT
                      - FIXED
                    description: |-
                      * `PERCENT` - Percent
                      * `FIXED` - Fixed
                  value:
                    type: string
                    pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
                  product:
                    type: object
                    properties:
                      name:
                        type: string
                        maxLength: 255
                    required:
                      - id
                      - name
                required:
                  - discount_type
                  - id
                  - product
                  - value
              examples:
                DiscountDetail:
                  value:
                    id: 1
                    discount_type: FIXED
                    value: '5.00'
                    product:
                      id: 42
                      name: Wireless Mouse
                  summary: Discount detail
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
    parameters:
      - name: id
        in: path
        required: true
        description: A unique integer value identifying this discount.
        schema:
          type: integer
        example: '1904'
  /api/v1/health/:
    get:
      operationId: v1_health_retrieve
      tags:
        - v1
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: No response body
      summary: v1 health retrieve
  /api/v1/orders/:
    get:
      operationId: v1_orders_list
      description: |

        Returns a list of orders belonging to the authenticated user.

        Orders represent completed checkout results and are read-only.

        Notes:
        - Orders are immutable.
        - Orders are created exclusively via cart checkout.
        - The list is ordered by creation time (implicit database order).
      summary: List user orders
      tags:
        - Orders
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: string
                      enum:
                        - CREATED
                        - PAID
                        - PAYMENT_FAILED
                        - SHIPPED
                        - DELIVERED
                        - CANCELED
                      description: |-
                        * `CREATED` - Created
                        * `PAID` - Paid
                        * `PAYMENT_FAILED` - Payment Failed
                        * `SHIPPED` - Shipped
                        * `DELIVERED` - Delivered
                        * `CANCELED` - Canceled
                  required:
                    - id
                    - items
                    - total_price
              examples:
                ListOfOrders:
                  value:
                    - - id: 123
                        status: CREATED
                        items:
                          - id: 1
                            product: 42
                            quantity: 2
                            price_at_order_time: '19.99'
                            total_price: '39.98'
                        total_price: '39.98'
                  summary: List of orders
        '401':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
  /api/v1/orders/{id}/:
    get:
      operationId: v1_orders_retrieve
      description: |

        Returns details of a specific order.

        Notes:
        - Only orders belonging to the authenticated user are accessible.
        - Orders cannot be modified after creation.
      summary: Retrieve order detail
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this order.
          required: true
      tags:
        - Orders
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - CREATED
                      - PAID
                      - PAYMENT_FAILED
                      - SHIPPED
                      - DELIVERED
                      - CANCELED
                    description: |-
                      * `CREATED` - Created
                      * `PAID` - Paid
                      * `PAYMENT_FAILED` - Payment Failed
                      * `SHIPPED` - Shipped
                      * `DELIVERED` - Delivered
                      * `CANCELED` - Canceled
                required:
                  - id
                  - items
                  - total_price
              examples:
                OrderDetail:
                  value:
                    id: 123
                    status: PAID
                    items:
                      - id: 1
                        product: 42
                        quantity: 2
                        price_at_order_time: '19.99'
                        total_price: '39.98'
                    total_price: '39.98'
                  summary: Order detail
        '401':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
    parameters:
      - name: id
        in: path
        required: true
        description: A unique integer value identifying this order.
        schema:
          type: integer
        example: '1904'
  /api/v1/payments/:
    post:
      operationId: v1_payments_create
      description: |

        Simulates a payment gateway interaction.

        This endpoint creates a payment for an order and immediately updates
        the order status based on the simulated payment result.

        Behavior:
        - Only orders in CREATED status can be paid.
        - Each order can have only one payment.
        - Payment result is simulated via request payload.

        Side effects:
        - On success: Order status is set to PAID.
        - On failure: Order status is set to PAYMENT_FAILED.

        Notes:
        - This is a fake payment gateway used for development and testing.
        - Payments are synchronous and non-retryable.
      summary: Create payment for an order
      tags:
        - Payments
      requestBody:
        content:
          application/json:
            schema:
              description: >-
                Request payload for creating a payment (fake gateway
                simulation).
              type: object
              properties:
                order_id:
                  type: integer
                  description: ID of the order to be paid. Order must be in CREATED status.
                result:
                  description: |-
                    Simulated payment result.

                    * `success` - success
                    * `fail` - fail
                  allOf:
                    - type: string
                      description: |-
                        * `success` - success
                        * `fail` - fail
              required:
                - order_id
                - result
            examples:
              SuccessfulPayment:
                value:
                  order_id: 123
                  result: success
                summary: Successful payment
        required: true
      security:
        - ApiKeyAuth: []
      responses:
        '201':
          description: No response body
        '400':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                InvalidPaymentResult:
                  value:
                    detail: Invalid payment result.
                  summary: Invalid payment result
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                OrderNotFoundOrNotPayable:
                  value:
                    detail: Not found.
                  summary: Order not found or not payable
        '409':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                PaymentAlreadyExists:
                  value:
                    detail: Payment already exists.
                  summary: Payment already exists
      parameters:
        - name: X-CSRFToken
          in: header
          schema:
            type: string
          example: '{{csrftoken}}'
  /api/v1/products/:
    get:
      operationId: v1_products_list
      description: |

        Returns a list of products available for purchase.

        Only products that are:
        - active
        - in stock (stock_quantity > 0)

        are returned by this endpoint.

        Notes:
        - Products are read-only.
        - Stock quantity is informational and does not represent reservation.
      summary: List available products
      tags:
        - Products
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      maxLength: 255
                    price:
                      type: string
                      pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
                    stock_quantity:
                      type: integer
                      minimum: -2147483648
                      maximum: 2147483647
                  required:
                    - id
                    - name
                    - price
                    - stock_quantity
              examples:
                ListOfProducts:
                  value:
                    - - id: 1
                        name: Wireless Mouse
                        price: '29.99'
                        stock_quantity: 15
                  summary: List of products
  /api/v1/products/{id}/:
    get:
      operationId: v1_products_retrieve
      description: |

        Returns details of a single product.

        The product must be:
        - active
        - in stock

        Otherwise, it will not be accessible via the API.
      summary: Retrieve product detail
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          description: A unique integer value identifying this product.
          required: true
      tags:
        - Products
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: response
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    maxLength: 255
                  price:
                    type: string
                    pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
                  stock_quantity:
                    type: integer
                    minimum: -2147483648
                    maximum: 2147483647
                required:
                  - id
                  - name
                  - price
                  - stock_quantity
              examples:
                ProductDetail:
                  value:
                    id: 1
                    name: Wireless Mouse
                    price: '29.99'
                    stock_quantity: 15
                  summary: Product detail
        '404':
          description: response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: string
    parameters:
      - name: id
        in: path
        required: true
        description: A unique integer value identifying this product.
        schema:
          type: integer
        example: '1904'
components:
  schemas:
    Cart:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        status:
          $ref: '#/components/schemas/CartStatusEnum'
        items:
          type: array
          items:
            $ref: '#/components/schemas/CartItem'
          readOnly: true
      required:
        - id
        - items
    CartItem:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        product:
          type: integer
        quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        price_at_add_time:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
      required:
        - id
        - price_at_add_time
        - product
        - quantity
    CartItemCreateRequestRequest:
      type: object
      description: |-
        OpenAPI request schema for adding an item to the cart.

        This serializer is used for documentation and validation
        of the request body, not for saving data.
      properties:
        product_id:
          type: integer
          description: ID of the product to add to the cart
        quantity:
          type: integer
          minimum: 1
          description: Quantity must be greater than zero
      required:
        - product_id
        - quantity
    CartStatusEnum:
      enum:
        - ACTIVE
        - CONVERTED
      type: string
      description: |-
        * `ACTIVE` - Active
        * `CONVERTED` - Converted
    Category:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        is_parent:
          type: boolean
        children:
          type: string
          readOnly: true
      required:
        - children
        - id
        - name
    Discount:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        discount_type:
          $ref: '#/components/schemas/DiscountTypeEnum'
        value:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
        product:
          allOf:
            - $ref: '#/components/schemas/DiscountProduct'
          readOnly: true
      required:
        - discount_type
        - id
        - product
        - value
    DiscountProduct:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
      required:
        - id
        - name
    DiscountTypeEnum:
      enum:
        - PERCENT
        - FIXED
      type: string
      description: |-
        * `PERCENT` - Percent
        * `FIXED` - Fixed
    ErrorResponse:
      type: object
      description: |-
        Standard error response schema.

        Used to document error responses returned by the API.
      properties:
        detail:
          type: string
          description: Human-readable description of the error.
      required:
        - detail
    LoginRequestRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
        - password
        - username
    Order:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        status:
          $ref: '#/components/schemas/OrderStatusEnum'
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
          readOnly: true
        total_price:
          type: string
          readOnly: true
      required:
        - id
        - items
        - total_price
    OrderItem:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        product:
          type: integer
        quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        price_at_order_time:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        total_price:
          type: string
          readOnly: true
      required:
        - id
        - price_at_order_time
        - product
        - quantity
        - total_price
    OrderStatusEnum:
      enum:
        - CREATED
        - PAID
        - PAYMENT_FAILED
        - SHIPPED
        - DELIVERED
        - CANCELED
      type: string
      description: |-
        * `CREATED` - Created
        * `PAID` - Paid
        * `PAYMENT_FAILED` - Payment Failed
        * `SHIPPED` - Shipped
        * `DELIVERED` - Delivered
        * `CANCELED` - Canceled
    PaymentCreateRequestRequest:
      type: object
      description: Request payload for creating a payment (fake gateway simulation).
      properties:
        order_id:
          type: integer
          description: ID of the order to be paid. Order must be in CREATED status.
        result:
          allOf:
            - $ref: '#/components/schemas/ResultEnum'
          description: |-
            Simulated payment result.

            * `success` - success
            * `fail` - fail
      required:
        - order_id
        - result
    Product:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        stock_quantity:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
      required:
        - id
        - name
        - price
        - stock_quantity
    ResultEnum:
      enum:
        - success
        - fail
      type: string
      description: |-
        * `success` - success
        * `fail` - fail
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
    ApiKeyAuth:
      type: apiKey
      in: header
      name: sessionid
tags:
  - name: Users
    description: User management
  - name: Auth
    description: Authentication & authorization
  - name: Products
    description: Product catalog management
  - name: Categories
    description: Product category management
  - name: Orders
    description: Read-only order resources
  - name: Payments
    description: Payment simulation and processing
  - name: Discounts
    description: Discount and promotion management
  - name: Cart
    description: >-
      User shopping cart representing intent. A user can have at most one ACTIVE
      cart.
  - name: Cart Items
    description: Items added to the active cart. Price is snapshotted at add time.
  - name: Cart Checkout
    description: Cart checkout workflow. Converts cart into an order.
servers:
  - url: '{{base_url}}'
