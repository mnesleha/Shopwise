{
  "info": {
    "_postman_id": "c83718d7-ac43-4af5-8485-0b9a02baf6e4",
    "name": "Shopwise Order API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Order Detail (Anonymous)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "9f7358d5-a472-42ae-9c1c-269cbdcff71c",
            "exec": [
              "pm.test(\"Order detail returns 403 for anonymous\", function () {\r",
              "    pm.response.to.have.status(403);\r",
              "});\r",
              "\r",
              "\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "986f7499-378d-4a18-a381-63a7358b5629",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/v1/orders/{{order_id}}/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "orders",
            "{{order_id}}",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Order Detail (Authentificated)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "9f7358d5-a472-42ae-9c1c-269cbdcff71c",
            "exec": [
              "pm.test(\"Order detail returns 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test(\"Order contains items\", function () {\r",
              "    const data = pm.response.json();\r",
              "    pm.expect(data.items.length).to.be.above(0);\r",
              "});\r",
              "\r",
              "pm.test(\"Total price is quantity Ã— price\", function () {\r",
              "    const data = pm.response.json();\r",
              "    const item = data.items[0];\r",
              "\r",
              "    const quantity = item.quantity;\r",
              "    const price = parseFloat(item.price_at_order_time);\r",
              "    const expectedTotal = (quantity * price).toFixed(2);\r",
              "\r",
              "    pm.expect(data.total_price).to.eql(expectedTotal);\r",
              "});\r",
              "\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "dc48c662-34b6-48f1-bda0-e952a4ce2928",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Cookie",
            "value": "sessionid={{sessionid}}",
            "type": "text"
          },
          {
            "key": "Cookie",
            "value": "csrftoken={{csrftoken}}",
            "type": "text"
          },
          {
            "key": "X-CSRFToken",
            "value": "{{csrftoken}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/orders/{{order_id}}/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "orders",
            "{{order_id}}",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity Check (POST 403 - Anonymous)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "82003ef7-9100-4eac-828d-7e8e5e65b70b",
            "exec": [
              "pm.test(\"Status code is 403\", function () {\r",
              "    pm.response.to.have.status(403);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "547071b2-c2ac-400b-adb6-0acc7d8b3038",
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/v1/orders/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "orders",
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Sanity Check (POST 405 - Authentificated)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "82003ef7-9100-4eac-828d-7e8e5e65b70b",
            "exec": [
              "pm.test(\"Status code is 405\", function () {\r",
              "    pm.response.to.have.status(405);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "270b29f7-ec93-4680-972a-26dd54471eed",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Cookie",
            "value": "sessionid={{sessionid}}",
            "type": "text"
          },
          {
            "key": "Cookie",
            "value": "csrftoken={{csrftoken}}",
            "type": "text"
          },
          {
            "key": "X-CSRFToken",
            "value": "{{csrftoken}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/orders/",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "orders",
            ""
          ]
        }
      },
      "response": []
    }
  ]
}